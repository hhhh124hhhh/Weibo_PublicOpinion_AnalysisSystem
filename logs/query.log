[15:59:33] 启动 query 应用...
[15:59:34] 2025-10-06 15:59:34.683
[15:59:34] Warning: the config option 'server.enableCORS=false' is not compatible with 'server.enableXsrfProtection=true'.
[15:59:34] As a result, 'server.enableCORS' is being overridden to 'true'.
[15:59:34] More information:
[15:59:34] In order to protect against CSRF attacks, we send a cookie with each request.
[15:59:34] To do so, we must specify allowable origins, which places a restriction on
[15:59:34] cross-origin resource sharing.
[15:59:34] If cross origin resource sharing is required, please disable server.enableXsrfProtection.
[15:59:36] You can now view your Streamlit app in your browser.
[15:59:36] Network URL: http://192.168.1.31:8503
[15:59:36] External URL: http://1.168.185.34:8503
[15:59:39] Query Agent已初始化
[15:59:39] 使用LLM: {'provider': 'DeepSeek', 'model': 'deepseek-chat', 'api_base': 'https://api.deepseek.com'}
[15:59:39] 搜索工具集: TavilyNewsAgency (支持6种搜索工具)
[15:59:39] [步骤 1] 生成报告结构...
[15:59:39] [ReportStructureNode] 正在为查询生成报告结构: sora 2
[15:59:39] INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
[15:59:50] [ReportStructureNode] 清理后的输出: {
[15:59:50] "type": "array",
[15:59:50] "items": [
[15:59:50] {
[15:59:50] "title": "Sora 2 模型概述与核心特性",
[15:59:50] "content": "Sora 2 的基本介绍、技术定位、主要功能特性以及与第一代Sora模型的区别和改进"
[15:59:50] },
[15:59:50] {
[15:59:50] "title": "Sora 2 的技术架构与工作原理",
[15:59:50] "content": "Sora 2 的底层技术架构、核心算法、模型结构和工作机制分析"
[15:59:50] },
[15:59:50] {
[15:59:50] "title": "Sora 2 的应用场景与使用案例",
[15:59:50] "content": "Sora 2 在实际应用中的具体场景、使用案例和行业应用分析"
[15:59:50] },
[15:59:50] {
[15:59:50] "title": "Sora 2 的性能评估与优势分析",
[15:59:50] "content": "Sora 2 的性能指标测试结果、与其他模型的对比分析、技术优势和局限性"
[15:59:50] },
[15:59:50] {
[15:59:50] "title": "Sora 2 的发展前景与行业影响",
[15:59:50] "content": "Sora 2 的未来发展方向、潜在应用前景、对相关行业的影响和意义"
[15:59:50] }
[15:59:50] ]
[15:59:50] }
[15:59:50] [ReportStructureNode] JSON解析成功
[15:59:50] [ReportStructureNode] 报告结构不是列表，尝试转换...
[15:59:50] [ReportStructureNode] 错误: 处理输出失败: 'ReportStructureNode' object has no attribute 'log_warning'
[15:59:50] [ReportStructureNode] 生成默认报告结构
[15:59:50] [ReportStructureNode] 成功生成 2 个段落结构
[15:59:50] [ReportStructureNode] 已将 2 个段落添加到状态中
[15:59:50] 报告结构已生成，共 2 个段落:
[15:59:50] 1. 研究概述
[15:59:50] 2. 深度分析
[15:59:50] - 生成搜索查询...
[15:59:50] [FirstSearchNode] 正在生成首次搜索查询
[15:59:50] INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
[15:59:55] [FirstSearchNode] 清理后的输出: {
[15:59:55] "search_query": "新闻研究分析 媒体趋势 报道深度分析",
[15:59:55] "search_tool": "deep_search_news",
[15:59:55] "reasoning": "由于需要为'研究概述'部分提供总体概述和分析，深度新闻分析工具能够提供最全面的信息，包含高级AI摘要和详细分析，适合进行深度研究和趋势分析。"
[15:59:55] }
[15:59:55] [FirstSearchNode] JSON解析成功
[15:59:55] [FirstSearchNode] 生成搜索查询: 新闻研究分析 媒体趋势 报道深度分析
[15:59:55] - 搜索查询: 新闻研究分析 媒体趋势 报道深度分析
[15:59:55] - 选择的工具: basic_search_news
[15:59:55] - 推理: 由于需要为'研究概述'部分提供总体概述和分析，深度新闻分析工具能够提供最全面的信息，包含高级AI摘要和详细分析，适合进行深度研究和趋势分析。
[15:59:55] - 执行网络搜索...
[15:59:55] → 执行搜索工具: basic_search_news
[15:59:55] --- TOOL: 基础新闻搜索 (query: 新闻研究分析 媒体趋势 报道深度分析) ---
[16:00:02] - 找到 7 个搜索结果
[16:00:02] 1. 占领全媒体信息传播制高点 - 新华社研究院...
[16:00:02] 2. 大数据在新闻传播中的应用和趋势研究 - 中华网...
[16:00:02] 3. 表达自由和媒介发展世界趋势 - UNESCO...
[16:00:02] 4. 50个新闻传媒研究热点与选题参考 - 知乎专栏...
[16:00:02] 5. [PDF] 新媒体环境下深度报道困境与创新路径 - 汉斯出版社...
[16:00:02] 6. 2024年全球新闻传播新趋势——基于五大议题的分析与展望 - 腾讯网...
[16:00:02] 7. 大数据对新闻业态重构三大层面革命性改变 - 腾讯研究院...
[16:00:02] - 生成初始总结...
[16:00:02] [FirstSummaryNode] 正在生成首次段落总结
[16:00:02] INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 400 Bad Request"
[16:00:02] DeepSeek API调用错误: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:02] WARNING:retry_helper:函数 invoke 第 1 次尝试失败: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:02] INFO:retry_helper:将在 5.0 秒后进行第 2 次尝试...
[16:00:07] INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 400 Bad Request"
[16:00:07] DeepSeek API调用错误: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:07] WARNING:retry_helper:函数 invoke 第 2 次尝试失败: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:07] INFO:retry_helper:将在 10.0 秒后进行第 3 次尝试...
[16:00:17] INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 400 Bad Request"
[16:00:17] DeepSeek API调用错误: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:17] WARNING:retry_helper:函数 invoke 第 3 次尝试失败: Error code: 400 - {'error': {'message': 'Content Exists Risk', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
[16:00:17] INFO:retry_helper:将在 20.0 秒后进行第 4 次尝试...
